<div class="modal-header">
    <h4 class="modal-title pull-left">
        <span *ngIf="selectMode">Select a custom filter</span>
        <span *ngIf="!selectMode">Computer saved filters</span>

    </h4>
    <button type="button" class="btn-close close pull-right white" aria-label="Close" (click)="close()">
      <span aria-hidden="true" class="visually-hidden">&times;</span>
    </button>
  </div>
  <div class="modal-body" style="min-height: 400px">
    <div>
        <p class="text-info">
            Computer filters are reusabled filters stored on the current user disk. You can view and edit them here.
        </p>
        <p *ngIf="!filterHolders">
            Loading filters
        </p>
        <div *ngIf="filterHolders">
            <div style="margin-bottom:18px">
                <button class="btn  btn-primary"  (click)="openFilterCreate()">+ Add new filter</button>
                <span class="float-end" style="white-space: no-wrap">
                    <select class="form-select" style="width: 250px">
                        <option selected>All</option>
                        <option>On computer</option>
                        <option>In session</option>
                    </select>
                </span>
            </div>

            <div class="shady-box table-box">
                <perfect-scrollbar #perfectScroll style="height: 400px;">

                    <div class="lead text-center" style="padding: 64px"  *ngIf="filterHolders.length === 0">
                        There's no custom filter configured yet. <br/>
                        <a href="javascript:;" (click)="openFilterCreate()" class="fw-bold">Create a new filter</a>
                    </div>
                    <table style="width:100%" class="filter-table" *ngIf="filterHolders.length > 0">
                        <tr>
                            <th style="width:32px">&nbsp;</th>
                            <th>Name</th>
                            <th style="width:150px">Kind</th>
                            <th style="width:100px">Storage</th>
                            <th style="width:250px">Actions</th>
                        </tr>
                        <tr *ngFor="let filterHolder of filterHolders">
                            <td>
                                <div class="form-check" [hidden]="!selectMode">
                                    <input class="form-check-input  bg-secondary" [(ngModel)]="selectedFilter"  type="radio" [value]="filterHolder.filter">
                                </div>
                            </td>
                            <td>
                                <a href="javascript:;" (click)="selectedFilter = filterHolder.filter" class="span-friendly-name text-white"
                                   [ngClass]="{'span-friendly-name-selected' : filterHolder.filter.identifier === selectedFilter?.identifier}">{{filterHolder.filter.friendlyName }}</a>
                            </td>
                            <td>{{filterHolder.filter.genericName }}</td>
                            <td>
                                <span *ngIf="filterHolder.storeLocation === 'Computer'">Computer</span>
                                <span *ngIf="filterHolder.storeLocation === 'OnSession'">In session</span>
                            </td>
                            <td>
                                <button class="btn btn-secondary btn-outline-white" (click)="invert(filterHolder.filter)">Negate</button> &nbsp;
                                <button class="btn btn-secondary btn-outline-white strong" [disabled]="filterHolder.filter.preMadeFilter"  (click)="openFilterEdit(filterHolder.filter)">Edit</button> &nbsp;
                                <button class="btn btn-secondary btn-outline-danger" (click)="deleteFilter(filterHolder.filter)">Delete</button>
                            </td>
                        </tr>
                    </table>
                </perfect-scrollbar>
            </div>
        </div>

    </div>
  </div>
  <div class="modal-footer">
    <button *ngIf="!selectMode" class="btn btn-primary" (click)="save(false)">
        Save
    </button>
    <button *ngIf="selectMode" [disabled]="!selectedFilter"  class="btn btn-primary" (click)="save(true)">
        Save and select filter
    </button>
    <button class="btn btn-dark" (click)="bsModalRef.hide()">Cancel</button>
  </div>
