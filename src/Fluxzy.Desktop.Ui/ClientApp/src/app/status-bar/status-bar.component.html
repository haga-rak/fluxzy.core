<div class="status-container" *ngIf="fileState && uiState">

    <span class="text-primary" [title]="uiState.fileState.workingDirectory"
            (click)="fileClick(uiState.fileState.workingDirectory)">
        <span *ngIf="fileState?.mappedFileName">{{ fileState.mappedFileName}}</span>
        <span *ngIf="!fileState?.mappedFileName">[new file]</span>
    </span>
    <small title="not saved" class="text-secondary" *ngIf="fileState.unsaved"> *not saved</small>
    &nbsp;|&nbsp;
    <span *ngIf="exchangeState">
        {{ exchangeState.totalCount }} items
        <span *ngIf="selectedCount > 0">
            ({{selectedCount}} selected)
        </span>
    </span>
    &nbsp;|&nbsp;
    <a href="javascript:;" (click)="selectFilter()" class="auto-color" title="Current view filter">
        <i class="bi bi-filter-circle-fill"></i>&nbsp;
        <span [ngClass]="{'text-teal' :uiState.viewFilter.filter.typeKind !== 'AnyFilter' }">
            <span *ngIf="uiState.viewFilter.filter.typeKind === 'AnyFilter'">no filter</span>
            <span
                *ngIf="uiState.viewFilter.filter.typeKind !== 'AnyFilter'"> {{ uiState.viewFilter.filter.friendlyName }}</span>
        </span>
    </a>
    &nbsp;|&nbsp;
    <a href="javascript:;" (click)="selectRule()" class="auto-color">
        <i class="fa fa-gavel" aria-hidden="true"></i>
        <span [ngClass]="{'text-teal' :uiState.activeRules.length  > 0 }">

            {{ uiState.activeRules.length }}
            <span *ngIf="uiState.activeRules.length < 2">
                active rule
            </span>
            <span *ngIf="uiState.activeRules.length >= 2">
                actives rules
            </span>
        </span>
    </a>

    <span *ngIf="uiState.breakPointState.hasToPop">
    &nbsp;|&nbsp;
        <a href="javascript:;" (click)="showBreakPointWindow()" class="text-danger" style="text-decoration: none">
          <i class="fa fa-pause" aria-hidden="true"></i>&nbsp;
            <span class="text-danger">

                {{ uiState.breakPointState.activeEntries }}
                <span *ngIf="uiState.breakPointState.activeEntries < 2">
                    request in pause
                </span>
                <span *ngIf="uiState.breakPointState.activeEntries >= 2">
                    requests in pause
                </span>
            </span>
        </a>
    </span>


    <span class="float-end">

        <span *ngIf="statusMessage">

            <strong class="update-info text-blue">
                {{statusMessage }}
            </strong>
            |
        </span>

        <span *ngIf="uiState.proxyState.runSettings">
            <span class="text-secondary">
                <span *ngIf="uiState.proxyState.runSettings.rawCaptureMode === 'None'" title="packet capture disabled">
                    no raw packet capture
                </span>
                <span *ngIf="uiState.proxyState.runSettings.rawCaptureMode === 'InProcess'" title="packet capture on (in process)">
                    packet capture on
                </span>
                <span *ngIf="uiState.proxyState.runSettings.rawCaptureMode === 'OutProcess'" title="packet capture on (out of process)">
                    packet capture on
                </span>
            </span>
            &nbsp;|&nbsp;
            <span class="text-secondary">
                <span *ngIf="uiState.proxyState.runSettings.sslConfig === 'NoSsl'" title="decrypting SSL/TLS trafic is disabled">
                    no decryption
                </span>
                <span *ngIf="uiState.proxyState.runSettings.sslConfig === 'OsDefault'" title="ssl decryption">
                    ssl decryption
                </span>
                <span *ngIf="uiState.proxyState.runSettings.sslConfig === 'BouncyCastle'" title="ssl decryption with TLS keys">
                    ssl decryption
                </span>
            </span>
            &nbsp;|&nbsp;
        </span>
        <span>
            <a *ngIf="uiState.systemProxyState.on" (click)="proxyOff()"
               href="javascript:;" class="text-green" title="Capture is on. Clic to toggle off"><i
                class="bi bi-play-circle-fill"></i></a>
            <a *ngIf="!uiState.systemProxyState.on" (click)="proxyOn()"
               href="javascript:;" class="text-secondary" title="Capture is off. Clic to toggle on">
               <i class="fa fa-stop-circle-o" aria-hidden="true"></i>
            </a>
        </span>
        <strong *ngIf="uiState.proxyState.boundConnections.length > 0">
            {{uiState.proxyState.boundConnections[0].address}}:{{uiState.proxyState.boundConnections[0].port}}
        </strong>
        <span *ngIf="uiState.proxyState.onError" class="text-danger"
                [title]="uiState.proxyState.message">
            &nbsp;
            <i class="fa fa-times" aria-hidden="true"></i>
        </span>
    </span>
</div>
